 
# JAM style makefile for icclib and friends

# The following three lines are not standard jambase
CCFLAGS 	+= $(CCOPTFLAG) ;		# Turn optimisation on
#CCFLAGS	    += $(CCDEBUGFLAG) ;		# Debugging flags
#CCFLAGS	+= $(CCHEAPDEBUG) ;		# Heap Debugging flags
LINKFLAGS	+= $(LINKDEBUGFLAG) ;	# Link debugging flags

#Products
Libraries = libicc ;
Executables = iccdump icclu fbtest ;
Headers = icc.h ;

#Install
InstallLib $(DOTDOT)$(SLASH)lib : $(Libraries)$(SUFLIB) ;
InstallFile $(DOTDOT)$(SLASH)h : $(Headers) ;
InstallBin $(DOTDOT)$(SLASH)bin : $(Executables)$(SUFEXE) ;

# ICC library
Library libicc.lib : icc.c ;

# Utilities / test programs
Main icctest : icctest.c ;
LinkLibraries icctest : libicc.lib ;

Main lutest : lutest.c ;
LinkLibraries lutest : libicc.lib ;

Main iccdump : iccdump.c ;
LinkLibraries iccdump : libicc.lib ;

Main icclu : icclu.c ;
LinkLibraries icclu : libicc.lib ;

Main iccrw : iccrw.c ;
LinkLibraries iccrw : libicc.lib ;

#Utility to check absolute A2B and B2A accuracy
Main fbtest : fbtest.c ;
LinkLibraries fbtest : libicc.lib ;

#Monotonic behaviour checker
#Main mcheck : mcheck.c ;
#LinkLibraries mcheck : libicc.lib ;

if $(BUILD_JUNK) {
	Main lab2lab : lab2lab.c ;
	LinkLibraries lab2lab : libicc.lib ;

	Main icm2ary : icm2ary.c ;

	# Check library is compatible with C++
	Main cppcheck : cppcheck.cpp ;
}


